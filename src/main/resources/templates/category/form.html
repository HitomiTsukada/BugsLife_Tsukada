<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{layout/layout}"
>
  <th:block layout:fragment="content">
    <h1 th:if="${category.id == null}">カテゴリー登録</h1>
    <h1 th:if="${category.id != null}">カテゴリー編集</h1>
    <hr />
    <form
      id="category-form"
      th:action="@{/categories}"
      th:method="@{${category.id == null} ? 'post' : 'put'}"
      th:object="${category}"
    >
      <input type="hidden" th:field="*{id}" />

      <!-- <div class="form-group">
        <label for="code">コード</label>
        <input
          id="code"
          name="code"
          type="text"
          class="form-control"
          th:field="*{code}"
        />
      </div> -->

      <!-- 課題７ -->
      <!-- 命名規則に従う正規表現パターン -->
      <!-- エラーメッセージ表示用のタイトル -->
      <div class="form-group">
        <label for="code">コード</label>
        <input
            id="code"
            name="code"
            type="text"
            class="form-control"
            th:field="*{code}"
            pattern="[A-Z]{3}-[0-9]{3}" 
            title="半角大文字アルファベット3文字 + ハイフン + 半角数字3文字の形式で入力してください。"
        />
      </div>


      <div class="form-group">
        <label for="name">名前</label>
        <input
          id="name"
          name="name"
          type="text"
          class="form-control"
          th:field="*{name}"
          maxlength="20"
        />
      <!-- </div>
      <div class="form-group">
        <label for="display_order">表示順</label>
        <input
          id="display_order"
          name="display_order"
          type="number"
          class="form-control"
          th:field="*{displayOrder}"
        />
      </div> -->
      
      <!-- 課題７ -->
      <!-- typeをtextにする -->
      <!-- 数字のみを許容する正規表現パターン -->
      <!-- エラーメッセージ表示用のタイトル -->
      <!-- JavaScriptで入力を制限 -->

      <div class="form-group">
        <label for="display_order">表示順</label>
        <input
            id="display_order"
            name="display_order"
            type="text" 
            class="form-control"
            th:field="*{displayOrder}"
            pattern="[0-9]*" 
            title="数字のみ入力してください。" 
            oninput="this.value = this.value.replace(/[^0-9]/g, '');" 
        />
    </div>

      <!-- <div class="form-group">
        <label>説明</label>
        <textarea
          class="form-control"
        ></textarea>
      </div>
       -->

      <!-- 課題７ -->
      
      <div class="form-group">
        <label for="description">説明</label>
        <textarea
        id="description"
        name="description"
        class="form-control"
        th:field="*{description}"
        maxlength="300"
      ></textarea>
      </div>


      <input id="submit" type="submit" class="btn btn-success" value="保存">
      <a th:href="@{/categories}" class="btn btn-default btn-secondary">戻る</a>
    </form>
  </th:block>
</html>
